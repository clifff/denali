<% content_for :meta do %>
  <% cache "entries/meta/tagged/#{@tag_slug}/#{@page}/#{@photoblog.id}/#{@photoblog.updated_at.to_i}" do %>
    <title><%= raw "Entries tagged “#{@tags.first.name}” &middot; #{@photoblog.name}" %><%= raw " &middot Page #{@page}" unless @page.nil? || @page == 1 %></title>
    <meta name="description" content="<%= Sanitize.fragment(@photoblog.description) %>">
    <link rel="canonical" href="<%= tag_url(@tags.first.slug) %>">

    <meta property="og:title" content="<%= raw "Entries tagged “#{@tags.first.name}” &middot; #{@photoblog.name}" %>">
    <meta property="og:image" content="<%= image_url 'cover.png' %>">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="628">
    <meta property="og:description" content="<%= Sanitize.fragment(@photoblog.description) %>">
    <meta property="og:url" content="<%= @page.nil? || @page == 1 ? tag_url(@tags.first.slug) : tag_url(@tags.first.slug, @page) %>">
    <meta property="og:type" content="Website">
    <meta property="og:site_name" content="<%= @photoblog.name %>">
    <meta property="og:locale" content="en_US">

    <meta name="twitter:site" content="@gesteves">
    <meta name="twitter:creator" content="@gesteves">
    <meta name="twitter:title" content="<%= raw "Entries tagged “#{@tags.first.name}” &middot; #{@photoblog.name}" %>">
    <meta name="twitter:url" content="<%= @page.nil? || @page == 1 ? tag_url(@tags.first.slug) : tag_url(@tags.first.slug, @page) %>">
    <meta name="twitter:description" content="<%= Sanitize.fragment(@photoblog.description) %>">
    <meta name="twitter:image" content="<%= image_url 'cover.png'  %>">
    <meta name="twitter:card" content="summary_large_image">
    <%= auto_discovery_link_tag :atom, tag_url(page: 1, format: 'atom'), title: "#{@photoblog.name} - Entries tagged “#{@tags.first.name}”" %>
  <% end %>
<% end %>

<% cache "entries/tagged/#{@tag_slug}/#{@page}/#{@photoblog.id}/#{@photoblog.updated_at.to_i}" do %>
  <div class="entry-list" data-columns>
    <%= render partial: 'entries/entry_list_item', collection: @entries, locals: { photo_variation: 'index' } %>
  </div>
  <%= paginate @entries %>
<% end %>
